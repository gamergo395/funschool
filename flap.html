<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flappy Bird Clone</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #70c5ce;
      font-family: Arial, sans-serif;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: #70c5ce;
    }
    #info {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 20px;
      font-weight: bold;
      text-shadow: 2px 2px #000;
    }
  </style>
</head>
<body>
  <div id="info">type hello in pasword: <span id="score">0</span></div>
  <canvas id="gameCanvas" width="400" height="600"></canvas>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreDisplay = document.getElementById('score');

    // Game constants
    const GRAVITY = 0.5;
    const FLAP = -7;
    const PIPE_WIDTH = 100;
    const PIPE_GAP = 150;
    const PIPE_INTERVAL = 2000; // milliseconds
    const BIRD_SIZE = 15;

    let birdY = canvas.height / 2;
    let birdVelocity = 0;
    let pipes = [];
    let score = 0;
    let gameOver = false;
    let lastPipeTime = 0;

    function resetGame() {
      birdY = canvas.height / 2;
      birdVelocity = 0;
      pipes = [];
      score = 0;
      gameOver = false;
      lastPipeTime = performance.now();
      scoreDisplay.textContent = score;
    }

    function flap() {
      if (gameOver) {
        resetGame();
      } else {
        birdVelocity = FLAP;
      }
    }

    document.addEventListener('keydown', e => {
      if (e.code === 'Space') flap();
    });

    document.addEventListener('mousedown', flap);

    function addPipe() {
      const topHeight = Math.random() * (canvas.height - PIPE_GAP - 100) + 20;
      pipes.push({
        x: canvas.width,
        top: topHeight,
        bottom: topHeight + PIPE_GAP,
        passed: false
      });
    }

    function drawBird() {
      ctx.fillStyle = '#ff0';
      ctx.fillRect(50, birdY, BIRD_SIZE, BIRD_SIZE);
    }

    function drawPipes() {
      ctx.fillStyle = '#0f0';
      for (let pipe of pipes) {
        ctx.fillRect(pipe.x, 0, PIPE_WIDTH, pipe.top);
        ctx.fillRect(pipe.x, pipe.bottom, PIPE_WIDTH, canvas.height - pipe.bottom);
      }
    }

    function updatePipes(deltaTime) {
      for (let pipe of pipes) {
        pipe.x -= 2;

        // Check for passing pipes
        if (!pipe.passed && pipe.x + PIPE_WIDTH < 50) {
          pipe.passed = true;
          score++;
          scoreDisplay.textContent = score;
        }

        // Check for collision
        if (
          50 < pipe.x + PIPE_WIDTH &&
          50 + BIRD_SIZE > pipe.x &&
          (birdY < pipe.top || birdY + BIRD_SIZE > pipe.bottom)
        ) {
          gameOver = true;
        }
      }

      pipes = pipes.filter(pipe => pipe.x + PIPE_WIDTH > 0);
    }

    function drawGround() {
      ctx.fillStyle = '#ded895';
      ctx.fillRect(0, canvas.height - 30, canvas.width, 30);
    }

    function gameLoop(timestamp) {
      if (!gameOver && timestamp - lastPipeTime > PIPE_INTERVAL) {
        addPipe();
        lastPipeTime = timestamp;
      }

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      birdVelocity += GRAVITY;
      birdY += birdVelocity;

      // Check for hitting the ground or flying too high
      if (birdY + BIRD_SIZE > canvas.height - 30 || birdY < 0) {
        gameOver = true;
      }

      updatePipes();
      drawPipes();
      drawBird();
      drawGround();

      if (gameOver) {
        ctx.fillStyle = 'rgba(0,0,0,0.5)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#fff';
        ctx.font = '40px Arial';
        ctx.textAlign = 'center';
        ctx.fillText('Game Over', canvas.width / 2, canvas.height / 2);
        ctx.font = '20px Arial';
        ctx.fillText('Press Space or Click to Restart', canvas.width / 2, canvas.height / 2 + 40);
      } else {
        requestAnimationFrame(gameLoop);
      }
    }

    // Start game
    resetGame();
    requestAnimationFrame(gameLoop);
  </script>
</body>
</html>
